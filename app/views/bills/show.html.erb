<div class="container max_924">

	<%= render 'bills/top_banner_with_names' %>
	<div class="row main_bill_information" >
		<div class="col-md-12 text-center" style="padding-bottom: 20px;">
			<div class="row" style="padding-bottom:20px;">
				<% if @bill.image_url %>
			    	<div class="col-md-12 main-bill" style="background-image: url('https:<%= @bill.image_url %>');padding-left: 0px; padding-right: 0px;">
			    <% else %>
					<div class="col-md-12 main-bill" style="background-image: url(<%= asset_path 'bill-standard-background.jpg' %>); padding-left: 0px; padding-right: 0px;">
				<% end %>
					<div class="bill-overlay">
						<table style="width:100%;height:100%;">
						  <tr>
							 <td style="text-align: center; vertical-align: middle;">
								<h1><%= link_to @bill.simple_name, bill_path(@bill) %></h1>
								<h3><%= link_to "#{@bill.official_name}" + "#{' - ' + @bill.issues.first.name if @bill.issues.first}", bill_path(@bill) %></h3>
							 </td>
						  </tr>
						</table>
					</div>
				</div>
			</div>



			<div class="row" style="margin-bottom: 20px;">
				<div class="col-sm-12 main-bill-arguments" style="padding-left:0;padding-right:0;">
					<table>
						<tr>
							<td>
								<div class="panel panel-bills-slider" style="box-shadow:none;">
									<div class="panel-body">
										<h2 class="header-argument-for text-center">ARGUMENT FOR</h2>
										<div class="text-left">
											<%= @bill.support.html_safe %>
										</div>
									</div>
								</div><!--.panel -->
							</td><td style="width:30px;">
							</td><td>
								<div class="panel panel-bills-slider" style="box-shadow:none;">
									<div class="panel-body">
										<h2 class="header-argument-against text-center">ARGUMENT AGAINST</h2>
										<div class="text-left">
											<%= @bill.opposition.html_safe %>
										</div>
									</div>
								</div><!--.panel -->
							</td>
						</tr>
						<tr>
							<td style="border-top: 1px solid #A1A1A1 !important; padding-top: 20px;">
								<div class="vote-button-yes">
									<%= render :partial => 'bills/vote_yes_form', :locals => { :bill => @bill.id, :favor => @for } %>
								</div>
							</td><td>
							</td><td style="border-top: 1px solid #A1A1A1 !important; padding-top: 20px;">
								<div class="vote-button-no">
									<%= render :partial => 'bills/vote_no_form', :locals => { :bill => @bill.id, :against => @against } %>
								</div>
							</tr>
						</tr>
					</table>
				</div>
			</div>





			<% if false %>
			<div class="row" style="margin-bottom: 20px;">
				<div class="col-sm-6 main-bill-arguments  arguments-left">
					<div class="panel panel-bills-slider">
						<div class="panel-body">
							<h2 class="header-argument-for text-center">ARGUMENT FOR</h2>
							<div class="text-left">
								<%= @bill.support.html_safe %>
							</div>
						</div>
					</div><!--.panel -->
					<div class="vote-button-yes">
						<% if user_signed_in? %>
							<%= render :partial => 'bills/vote_yes_form', :locals => { :bill => @bill.id, :favor => @for } %>
						<% else %>
							<a class="navbar-brand" href="#" data-toggle="modal" data-target="#loginModal">SIGN IN</a>
						<% end %>
					</div>
				</div>
				<div class="col-sm-6 main-bill-arguments arguments-right">
					<div class="panel panel-bills-slider">
						<div class="panel-body">
							<h2 class="header-argument-against text-center">ARGUMENT AGAINST</h2>
							<div class="text-left">
								<%= @bill.opposition.html_safe %>
							</div>
						</div>
					</div><!--.panel -->
					<div class="vote-button-no">
						<% if user_signed_in? %>
							<%= render :partial => 'bills/vote_no_form', :locals => { :bill => @bill.id, :against => @against } %>
						<% else %>
							<a class="navbar-brand" href="#" data-toggle="modal" data-target="#loginModal">SIGN IN</a>
						<% end %>
					</div>

				</div>
			</div>
			<% end %>




		</div>
	</div>
	
	<div class="row" style="" id="bill-progress-table" data-bill-progress='<%= @bill.progress %>'>
		<h2 class="text-din text-center" style="padding-bottom:20px;">BILL PROGRESS</h2>
		<div id="bill-progress-bar">
			<table style="margin: 0 auto;">
				<tr>
					<td class="bill-progress-cell">
						<div class="text-din text-center bill-progress-title" id="house_of_commons_div">
							HOUSE&nbsp;OF&nbsp;COMMONS
						</div>
					</td>
					<td style="width:34px;"></td>
					<td class="bill-progress-cell">
						<div class="text-din text-center bill-progress-title" id="house_of_lords_div">
							HOUSE&nbsp;OF&nbsp;LORDS
						</div>
					</td>
					<td style="width:34px;"></td>
					<td class="bill-progress-cell">
						<div class="text-din text-center bill-progress-title" id="royal_assent_div">
							ROYAL&nbsp;ASSENT
						</div>
					</td>
				</tr>
			</table>
		</div>
		<!--
		<div class="col-md-2 col-md-offset-3" style="text-align:center;" id="house_of_commons_div">
			HOUSE&nbsp;OF&nbsp;COMMONS
		</div>
		<div class="col-md-2" style="text-align:center;" id="house_of_lords_div">
			HOUSE&nbsp;OF&nbsp;LORDS
		</div>
		<div class="col-md-2" style="text-align:center;" id="royal_assent_div">
			ROYAL&nbsp;ASSENT
		</div>
		-->
	</div>


	<div class="row bill-details">
		<div class="col-md-12 text-left text-din">
			<h2 class="text-din">MEANING</h2>
			<%= @bill.meaning.html_safe %>
		</div>
	</div>


	<div class="row bill-details">
		<div class="col-md-12 text-left text-din">
			<h2 class="text-din">WHO DOES IT IMPACT?</h2>
			<%= @bill.impact.html_safe %>
		</div>
	</div>


	<div class="row" style="padding-bottom:40px;">
		<div class="col-md-12 text-left text-din">
			<h2 class="text-din">POTENTIAL COSTS</h2>
			<%= @bill.cost.html_safe %>
		</div>
	</div>


	<div class="row" style="padding-bottom:80px;">
		<div class="col-md-12 text-left  text-din">
			<% @issues.each do |issue| %>
				<a href="<%= issue_name_path(issue.name) %>" class="text-uppercase" style="display: inline; color:#666; border: 1px solid #a8a8a8; padding: 8px; margin-right: 23px;"><%= issue.name %></a>
			<% end %>
		</div>
	</div>
	
</div><!--.container -->

<script type="text/javascript">
var ready;
ready = function() {
var current_progess = $('#bill-progress-table').data('bill-progress');
var finder_name = current_progess + "_div"
$('#' + finder_name).css('color','red');
};

$(document).ready(ready);
$(document).on('page:load', ready);

</script>

<script type="text/javascript">
var ready;
ready = function() {


	 $('body').off('click','.bill_voting');
	  $('body').on('click','.bill_voting', function(e){
	  	e.preventDefault();

	  	var this_form = $(this);
	  	var comment_section = $(this_form).children('.hidden_comment');

	  	if ( this_form.hasClass('vote_yes') ) {
	  		//$('#commentModal').addClass('modal-whip-vote-yes');
	  		$('#myModalLabelVote').html('<span class="text-vote-yes">VOTED FOR</span>');
	  	} else {
	  		//$('#commentModal').addClass('modal-whip-vote-no');
	  		$('#myModalLabelVote').html('<span class="text-vote-no">VOTED AGAINST</span>');
	  	}

	  	comment_section.val('testing');
	  	
	  	$('#commentModal').modal('show');

	  	$('#commentModal').on('hide.bs.modal', function(e){
	  		var comment_modal = $(this);
	  		var new_comment = $(comment_modal).find('#content').val();
	  		comment_section.val(new_comment);var new_comment = $('#add_comment').siblings('#content').val();
	  		
	  		
	  		this_form.trigger("submit.rails");
	  	});

	  	// Need to rework this still
	  	// so far creates modal when vote btn is clicked
	  	// and submits vote on closing of modal
	  	// need to add right facing triangle action btn to 'submit' vote
	  	// this will actually just hide comment box and text at top of modal
	  	// actual submission happens on close of modal
	  	// also need to have social share icons slide up / center in modal after other stuff is hidden

	  	
	  	$('#commentModal').off('click','#add_comment');
	  	$('#commentModal').on('click','#add_comment',function(e){
	  		var new_comment = $(this).siblings('#content').val();
	  		comment_section.val(new_comment);
	  		$('#vote-modal-comment').hide();
	  		$('#vote-modal-social').fadeIn();
	  		//$('#commentModal').modal('hide');
	  		//this_form.trigger("submit.rails");
	  	});
	  	

	  });



};

$(document).ready(ready);
$(document).on('page:load', ready);
</script>